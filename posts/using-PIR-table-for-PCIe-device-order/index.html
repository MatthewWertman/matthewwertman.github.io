<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="prefer-datetime-locale" content="en"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Using the $PIR Table to get PCIe device order" /><meta name="author" content="Matthew Wertman" /><meta property="og:locale" content="en" /><meta name="description" content="Identifying PCIe devices physically in a system can be a challenging problem. In my experience, when you have 6, 8, 12 PCIe devices in a system (GPUs in my case), they often don’t show up how you would expect. Now lets say one GPU starts having issues, how do you know which one is which?" /><meta property="og:description" content="Identifying PCIe devices physically in a system can be a challenging problem. In my experience, when you have 6, 8, 12 PCIe devices in a system (GPUs in my case), they often don’t show up how you would expect. Now lets say one GPU starts having issues, how do you know which one is which?" /><link rel="canonical" href="https://matthewwertman.github.io/posts/using-PIR-table-for-PCIe-device-order/" /><meta property="og:url" content="https://matthewwertman.github.io/posts/using-PIR-table-for-PCIe-device-order/" /><meta property="og:site_name" content="MattWert.io" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-04-20T00:04:00-07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Using the $PIR Table to get PCIe device order" /><meta name="twitter:site" content="@username" /><meta name="twitter:creator" content="@mattwert57" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Matthew Wertman","url":"https://github.com/MatthewWertman/"},"dateModified":"2024-04-20T00:04:00-07:00","datePublished":"2024-04-20T00:04:00-07:00","description":"Identifying PCIe devices physically in a system can be a challenging problem. In my experience, when you have 6, 8, 12 PCIe devices in a system (GPUs in my case), they often don’t show up how you would expect. Now lets say one GPU starts having issues, how do you know which one is which?","headline":"Using the $PIR Table to get PCIe device order","mainEntityOfPage":{"@type":"WebPage","@id":"https://matthewwertman.github.io/posts/using-PIR-table-for-PCIe-device-order/"},"url":"https://matthewwertman.github.io/posts/using-PIR-table-for-PCIe-device-order/"}</script><title>Using the $PIR Table to get PCIe device order | MattWert.io</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="MattWert.io"><meta name="application-name" content="MattWert.io"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/37555232.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">MattWert.io</a></div><div class="site-subtitle font-italic">Talks, Projects and Opinions Related to Development.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/MatthewWertman" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://mastodon.social/web/@MatthewWertman" aria-label="mastodon" target="_blank" rel="noopener"> <i class="fab fa-mastodon"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['matthewwertman57','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Using the $PIR Table to get PCIe device order</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Using the $PIR Table to get PCIe device order</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1713596640" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 20, 2024 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/MatthewWertman/">Matthew Wertman</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1894 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><p>Identifying PCIe devices physically in a system can be a challenging problem. In my experience, when you have 6, 8, 12 PCIe devices in a system (GPUs in my case), they often don’t show up how you would expect. Now lets say one GPU starts having issues, how do you know which one is which?</p><p>With the hardware that I have worked with, I have had a lot of success with using the $PIR table to identify which bus addresses are attached to which physical PCIe slot. In this blog, I will show you how you can do so with the help of a script!</p><h2 id="introduction-to-the-problem"><span class="mr-2">Introduction To The Problem</span><a href="#introduction-to-the-problem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>You would think that if you had a series of 12 PCIe slots that they would show up in order (from left to right, starting closest to the CPU), but this is often not the case in my experience. In HiveOS specifically, they show the detected GPU devices in the system along with their assigned bus address after login:</p><p><img data-src="../../assets/img/2024-04-20-motd.PNG" alt="HiveOS's motd commmand" data-proofer-ignore></p><p>But not knowing the order of how the GPU devices were assigned makes it not feasible to hunt down a specific card by only its bus address. Leaving only the process of elimination to determine the problem card.</p><h2 id="the-pir-table"><span class="mr-2">The $PIR Table</span><a href="#the-pir-table" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The PCI Interrupt Routing Table ($PIR) is a table in read-only memory containing the routing information of the system’s PCI slot entries (embedded devices or physical PCIe slots). Each entry defines PCI device information that is attached to that slot, even an ‘slot number’ indicating the corresponding physical slot. So if we can figure out each PCIe slot’s corresponding slot number, we have all the information that we need to generate a “map” of the current rig!</p><h2 id="getting-started"><span class="mr-2">Getting Started</span><a href="#getting-started" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Let’s build this tool together and as we get further it should get a bit clearer of what is going on. Lets say we have 12 GPUs in a unit that is running HiveOS. As shown before, this is what we get when we log into the system: <img data-src="../../assets/img/2024-04-20-motd.PNG" alt="HiveOS's motd commmand" data-proofer-ignore></p><p>We can actually get this $PIR table data pretty easily within HiveOS with the following command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>biosdecode
</pre></table></code></div></div><p>A lot of other BIOS information gets outputted as well but we are specifically after the <code class="language-plaintext highlighter-rouge">PCI Interrupt Routing 1.0 present</code> header. This is essentially the $PIR table printed in a human-readable format</p><p><img data-src="../../assets/img/2024-04-20-biosdecodePIR.PNG" alt="biosdecode PIR output" data-proofer-ignore></p><p>This section is mainly made up of slot entries which each represents PCI device. Each <code class="language-plaintext highlighter-rouge">Slot Entry</code> contains the device bus ID attached and slot number if available which acts like a designation for the physical slot. If we were to remove an GPU from the system and reboot, we would see that device ID and its corresponding table entry missing from the table. We can use these assigned slot numbers as identifiers to each physical slot on the motherboard and effectively made our map! Lets see what this looks like.</p><p>Adding in GPUs one by one starting at the PCIe slot closest to the CPU will get us the <code class="language-plaintext highlighter-rouge">slot number</code> for each slot and identify which device is in which slot. Using this method, this is the order for our example:</p><div class="table-wrapper"><table><thead><tr><th>Physical Slot (starting at CPU)<th>BIOS Slot Number<tbody><tr><td>Slot 1<td>16<tr><td>Slot 2<td>37<tr><td>Slot 3<td>38<tr><td>Slot 4<td>39<tr><td>Slot 5<td>40<tr><td>Slot 6<td>41<tr><td>Slot 7<td>42<tr><td>Slot 8<td>43<tr><td>Slot 9<td>48<tr><td>Slot 10<td>53<tr><td>Slot 11<td>54<tr><td>Slot 12<td>55</table></div><p>Already we can put together our map of the GPU devices vs. their physical motherboard slots by replacing those slot numbers with the corresponding GPU bus IDs!</p><div class="table-wrapper"><table><thead><tr><th>Physical Slot (starting at CPU)<th>GPU Bus ID<tbody><tr><td>Slot 1<td>01:00.0<tr><td>Slot 2<td>07:00.0<tr><td>Slot 3<td>08:00.0<tr><td>Slot 4<td>09:00.0<tr><td>Slot 5<td>0a:00.0<tr><td>Slot 6<td>0b:00.0<tr><td>Slot 7<td>0c:00.0<tr><td>Slot 8<td>0d:00.0<tr><td>Slot 9<td>02:00.0<tr><td>Slot 10<td>03:00.0<tr><td>Slot 11<td>04:00.0<tr><td>Slot 12<td>05:00.0</table></div><h2 id="lets-write-a-script"><span class="mr-2">Let’s write a script!</span><a href="#lets-write-a-script" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Now that we have all of the needed information and know how to generate a GPU vs. PCIe slot map, we will automate it with a shell script:</p><div file="gpu_lookup_table" class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="gpu_lookup_table"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="c">##</span>
<span class="c">## gpu_lookup_table -- generates a PCI bus address vs. PCIe slot map</span>

<span class="c"># $PIR found flag</span>
<span class="nv">PIR</span><span class="o">=</span>0

<span class="c"># slot designations in order of left to right (starting at CPU)</span>
<span class="nv">pir_map</span><span class="o">=(</span>16 37 38 39 40 41 42 43 48 53 54 55<span class="o">)</span>

<span class="c"># store the output of biosdecode</span>
<span class="nv">C_BIOS_PIR_TABLE</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span><span class="nb">sudo </span>biosdecode<span class="si">)</span><span class="s2">"</span>

<span class="c"># not every system may have a $PIR table so we have a function to check</span>
<span class="k">function </span>check_for_pir_table <span class="o">{</span>
    <span class="k">if </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$C_BIOS_PIR_TABLE</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="nt">-q</span> <span class="s2">"PCI Interrupt Routing"</span><span class="p">;</span> <span class="k">then
        return </span>0
    <span class="k">fi
    return </span>1
<span class="o">}</span>

<span class="c"># hiveos stores the detected GPU devices in json</span>
<span class="c"># parse $GPU_DETECT_JSON to get detected GPU bus addresses</span>
<span class="k">function </span>get_gpu_info <span class="o">{</span>
    <span class="o">[[</span> <span class="o">!</span> <span class="nt">-f</span> <span class="nv">$GPU_DETECT_JSON</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="k">return </span>1
    <span class="nb">local </span><span class="nv">gpu_detect_json</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span>&lt; <span class="nv">$GPU_DETECT_JSON</span><span class="si">)</span><span class="s2">"</span>

    <span class="nv">BUSID</span><span class="o">=()</span>

    <span class="nb">local </span><span class="nv">idx</span><span class="o">=</span><span class="nt">-1</span>
    <span class="k">while </span><span class="nv">IFS</span><span class="o">=</span><span class="s2">";"</span> <span class="nb">read </span>busid brand vendor mem vbios name<span class="p">;</span> <span class="k">do</span>
        <span class="o">((</span>idx++<span class="o">))</span>
        BUSID[idx]<span class="o">=</span><span class="s2">"</span><span class="nv">$busid</span><span class="s2">"</span>

    <span class="k">done</span> &lt; &lt;<span class="o">(</span> <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$gpu_detect_json</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">-c</span> <span class="s1">'.[] | (.busid+";"+.brand+";"+.vendor+";"+.mem+";"+.vbios+";"+.name)'</span> 2&gt;/dev/null <span class="o">)</span>

    <span class="o">[[</span> <span class="k">${#</span><span class="nv">BUSID</span><span class="p">[@]</span><span class="k">}</span> <span class="nt">-eq</span> 0 <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="k">return </span>1
    <span class="k">return </span>0
<span class="o">}</span>

<span class="c"># get_pir_device_slot</span>
<span class="c"># $1 - GPU bus address</span>
<span class="c"># returns PCIe designation for given bus adddress in $PIR</span>
<span class="k">function </span>get_pir_device_slot <span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span>C_GET_PIR_PCI_SLOT_NUMBER
    <span class="nb">local </span>pci_slot
    <span class="nv">pci_slot</span><span class="o">=</span><span class="s2">""</span>
    
    <span class="nv">C_GET_PIR_PCI_SLOT_NUMBER</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$C_BIOS_PIR_TABLE</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> | <span class="nb">cut</span> <span class="nt">-d</span><span class="s2">"."</span> <span class="nt">-f1</span><span class="si">)</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="nt">-Poe</span> <span class="s1">'slot number ([0-9]{1,})'</span> | <span class="nb">awk</span> <span class="s1">'{print $3}'</span><span class="si">)</span>
    
    <span class="k">if</span> <span class="o">[[</span> <span class="nt">-z</span> <span class="nv">$pci_slot</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
        for</span> <span class="o">((</span> <span class="nv">idx</span><span class="o">=</span>0<span class="p">;</span> idx &lt; <span class="k">${#</span><span class="nv">pir_map</span><span class="p">[@]</span><span class="k">}</span><span class="p">;</span> idx++ <span class="o">))</span><span class="p">;</span> <span class="k">do
            if</span> <span class="o">[[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">pir_map</span><span class="p">[</span><span class="nv">$idx</span><span class="p">]</span><span class="k">}</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"</span><span class="nv">$C_GET_PIR_PCI_SLOT_NUMBER</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
               </span><span class="nv">pci_slot</span><span class="o">=</span><span class="s2">"PCIE </span><span class="k">$((</span>idx+1<span class="k">))</span><span class="s2">"</span>
               <span class="nb">break
            </span><span class="k">fi
        done
    fi
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$pci_slot</span><span class="s2">"</span>
    <span class="nb">unset </span>C_GET_PIR_PCI_SLOT_NUMBER
<span class="o">}</span>

<span class="k">if </span>check_for_pir_table<span class="p">;</span> <span class="k">then
    </span><span class="nv">PIR</span><span class="o">=</span>1  <span class="c"># $PIR was found</span>
<span class="k">fi
</span>get_gpu_info

<span class="k">if</span> <span class="o">[[</span> PIR <span class="nt">-eq</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then
	for</span><span class="o">((</span> <span class="nv">idx</span><span class="o">=</span>1<span class="p">;</span> idx &lt; <span class="k">${#</span><span class="nv">BUSID</span><span class="p">[@]</span><span class="k">}</span><span class="p">;</span> idx++ <span class="o">))</span><span class="p">;</span> <span class="k">do</span>  <span class="c"># idx starts at 1 to skip CPU busid</span>
        <span class="nv">dev</span><span class="o">=</span><span class="k">${</span><span class="nv">BUSID</span><span class="p">[idx]</span><span class="k">}</span>
        <span class="nb">printf</span> <span class="s2">"</span><span class="k">${</span><span class="nv">BUSID</span><span class="p">[idx]</span><span class="k">}</span><span class="s2"> </span><span class="si">$(</span>get_pir_device_slot <span class="nv">$dev</span><span class="si">)</span><span class="se">\n</span><span class="s2">"</span>
    <span class="k">done
else
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="se">\$</span><span class="s2">PIR Table not found. Exitting..."</span>
<span class="k">fi
</span><span class="nb">exit </span>0
</pre></table></code></div></div><p>Running this script will get us the table we got previously:</p><p><img data-src="../../assets/img/2024-04-20-gltoutputex1.jpg" alt="gpu_lookup_table script output" data-proofer-ignore></p><h2 id="adding-support-for-amd-gpus"><span class="mr-2">Adding support for AMD GPUs</span><a href="#adding-support-for-amd-gpus" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Generally AMD GPUs detect in the system a little bit differently than Nvidia. Here is an example:</p><p><img data-src="../../assets/img/2024-04-20-amdlspci.png" alt="AMD GPU in lspci" data-proofer-ignore></p><p>When looking at one within <code class="language-plaintext highlighter-rouge">lspci</code>, there are multiple bus addresses to one card. The one we are after is the ‘VGA compatible controller’ (03:00.0 in this case). But when running the <code class="language-plaintext highlighter-rouge">biosdecode</code> command we see that the device IDs are actually the ‘Upstream Port of PCI Express Switch’ (01.00.0). <img data-src="../../assets/img/2024-04-20-amdbiosdecode.jpg" alt="AMD GPU in biosdecode" data-proofer-ignore></p><p>To account for this we can add another function for AMD cards to get the proper bus address to search the $PIR with:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="c"># store lspci output</span>
<span class="nv">C_LSPCI_TABLE</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span>lspci <span class="nt">-mm</span><span class="si">)</span><span class="s2">"</span>

<span class="k">function </span>get_amd_pir_busid <span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span>C_GET_AMD_BUSID
    <span class="nb">local </span><span class="nv">dev</span><span class="o">=</span>
    <span class="k">if</span> <span class="o">!</span> <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$C_LSPCI_TABLE</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="nt">-q</span> <span class="s2">"Ellesmere"</span><span class="p">;</span> <span class="k">then</span>  <span class="c"># Ellesmere behave like nvidia cards</span>
        <span class="nv">C_GET_AMD_BUSID</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$C_LSPCI_TABLE</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="nt">-B</span> 2 | <span class="nb">grep</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="nt">-B</span> 2 | <span class="nb">grep</span> <span class="nt">-Po</span> <span class="s1">'([0-9a-f]{2})(:00)\.0'</span> <span class="nt">-m</span> 1<span class="si">)</span>
        <span class="nv">dev</span><span class="o">=</span><span class="k">${</span><span class="nv">C_GET_AMD_BUSID</span><span class="k">}</span>
    <span class="k">else
        </span><span class="nv">dev</span><span class="o">=</span><span class="nv">$1</span>
    <span class="k">fi
    </span><span class="nb">unset </span>C_GET_AMD_BUSID
    <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$dev</span><span class="s2">"</span>
<span class="o">}</span>
</pre></table></code></div></div><p>This is the full script with AMD GPU support:</p><div file="gpu_lookup_table" class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="gpu_lookup_table"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="c">##</span>
<span class="c">## gpu_lookup_table -- generates a PCI bus address vs. PCIe slot map; now with AMD support!</span>

<span class="c"># $PIR found flag</span>
<span class="nv">PIR</span><span class="o">=</span>0

<span class="c"># slot designations in order of left to right (starting at CPU)</span>
<span class="nv">pir_map</span><span class="o">=(</span>16 37 38 39 40 41 42 43 48 53 54 55<span class="o">)</span>

<span class="c"># store the output of biosdecode</span>
<span class="nv">C_BIOS_PIR_TABLE</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span><span class="nb">sudo </span>biosdecode<span class="si">)</span><span class="s2">"</span>
<span class="c"># store lspci output</span>
<span class="nv">C_LSPCI_TABLE</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span>lspci <span class="nt">-mm</span><span class="si">)</span><span class="s2">"</span>

<span class="c"># not every system may have a $PIR table so we have a function to check</span>
<span class="k">function </span>check_for_pir_table <span class="o">{</span>
    <span class="k">if </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$C_BIOS_PIR_TABLE</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="nt">-q</span> <span class="s2">"PCI Interrupt Routing"</span><span class="p">;</span> <span class="k">then
        return </span>0
    <span class="k">fi
    return </span>1
<span class="o">}</span>

<span class="c"># hiveos stores the detected GPU devices in json</span>
<span class="c"># parse $GPU_DETECT_JSON to get detected GPU bus addresses</span>
<span class="k">function </span>get_gpu_info <span class="o">{</span>
    <span class="o">[[</span> <span class="o">!</span> <span class="nt">-f</span> <span class="nv">$GPU_DETECT_JSON</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="k">return </span>1
    <span class="nb">local </span><span class="nv">gpu_detect_json</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span>&lt; <span class="nv">$GPU_DETECT_JSON</span><span class="si">)</span><span class="s2">"</span>

    <span class="nv">BUSID</span><span class="o">=()</span>

    <span class="nb">local </span><span class="nv">idx</span><span class="o">=</span><span class="nt">-1</span>
    <span class="k">while </span><span class="nv">IFS</span><span class="o">=</span><span class="s2">";"</span> <span class="nb">read </span>busid brand vendor mem vbios name<span class="p">;</span> <span class="k">do</span>
        <span class="o">((</span>idx++<span class="o">))</span>
        BUSID[idx]<span class="o">=</span><span class="s2">"</span><span class="nv">$busid</span><span class="s2">"</span>
        BRAND[idx]<span class="o">=</span><span class="s2">"</span><span class="nv">$brand</span><span class="s2">"</span>

    <span class="k">done</span> &lt; &lt;<span class="o">(</span> <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$gpu_detect_json</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="nt">-c</span> <span class="s1">'.[] | (.busid+";"+.brand+";"+.vendor+";"+.mem+";"+.vbios+";"+.name)'</span> 2&gt;/dev/null <span class="o">)</span>

    <span class="o">[[</span> <span class="k">${#</span><span class="nv">BUSID</span><span class="p">[@]</span><span class="k">}</span> <span class="nt">-eq</span> 0 <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="k">return </span>1
    <span class="k">return </span>0
<span class="o">}</span>

<span class="c"># get_pir_device_slot</span>
<span class="c"># $1 - GPU bus address</span>
<span class="c"># returns PCIe designation for given bus adddress in $PIR</span>
<span class="k">function </span>get_pir_device_slot <span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span>C_GET_PIR_PCI_SLOT_NUMBER
    <span class="nb">local </span>pci_slot
    <span class="nv">pci_slot</span><span class="o">=</span><span class="s2">""</span>
    
    <span class="nv">C_GET_PIR_PCI_SLOT_NUMBER</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$C_BIOS_PIR_TABLE</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> | <span class="nb">cut</span> <span class="nt">-d</span><span class="s2">"."</span> <span class="nt">-f1</span><span class="si">)</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="nt">-Poe</span> <span class="s1">'slot number ([0-9]{1,})'</span> | <span class="nb">awk</span> <span class="s1">'{print $3}'</span><span class="si">)</span>
    
    <span class="k">if</span> <span class="o">[[</span> <span class="nt">-z</span> <span class="nv">$pci_slot</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
        for</span> <span class="o">((</span> <span class="nv">idx</span><span class="o">=</span>0<span class="p">;</span> idx &lt; <span class="k">${#</span><span class="nv">pir_map</span><span class="p">[@]</span><span class="k">}</span><span class="p">;</span> idx++ <span class="o">))</span><span class="p">;</span> <span class="k">do
            if</span> <span class="o">[[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">pir_map</span><span class="p">[</span><span class="nv">$idx</span><span class="p">]</span><span class="k">}</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"</span><span class="nv">$C_GET_PIR_PCI_SLOT_NUMBER</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
               </span><span class="nv">pci_slot</span><span class="o">=</span><span class="s2">"PCIE </span><span class="k">$((</span>idx+1<span class="k">))</span><span class="s2">"</span>
               <span class="nb">break
            </span><span class="k">fi
        done
    fi
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$pci_slot</span><span class="s2">"</span>
    <span class="nb">unset </span>C_GET_PIR_PCI_SLOT_NUMBER
<span class="o">}</span>

<span class="k">function </span>get_amd_pir_busid <span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span>C_GET_AMD_BUSID
    <span class="nb">local </span><span class="nv">dev</span><span class="o">=</span>
    <span class="k">if</span> <span class="o">!</span> <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$C_LSPCI_TABLE</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="nt">-q</span> <span class="s2">"Ellesmere"</span><span class="p">;</span> <span class="k">then</span>  <span class="c"># Ellesmere behave like nvidia cards</span>
        <span class="nv">C_GET_AMD_BUSID</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$C_LSPCI_TABLE</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="nt">-B</span> 2 | <span class="nb">grep</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="nt">-B</span> 2 | <span class="nb">grep</span> <span class="nt">-Po</span> <span class="s1">'([0-9a-f]{2})(:00)\.0'</span> <span class="nt">-m</span> 1<span class="si">)</span>
        <span class="nv">dev</span><span class="o">=</span><span class="k">${</span><span class="nv">C_GET_AMD_BUSID</span><span class="k">}</span>
    <span class="k">else
        </span><span class="nv">dev</span><span class="o">=</span><span class="nv">$1</span>
    <span class="k">fi
    </span><span class="nb">unset </span>C_GET_AMD_BUSID
    <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$dev</span><span class="s2">"</span>
<span class="o">}</span>

<span class="k">if </span>check_for_pir_table<span class="p">;</span> <span class="k">then
    </span><span class="nv">PIR</span><span class="o">=</span>1  <span class="c"># $PIR was found</span>
<span class="k">fi
</span>get_gpu_info

<span class="k">if</span> <span class="o">[[</span> PIR <span class="nt">-eq</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then
	for</span><span class="o">((</span> <span class="nv">idx</span><span class="o">=</span>1<span class="p">;</span> idx &lt; <span class="k">${#</span><span class="nv">BUSID</span><span class="p">[@]</span><span class="k">}</span><span class="p">;</span> idx++ <span class="o">))</span><span class="p">;</span> <span class="k">do</span>  <span class="c"># idx starts at 1 to skip CPU busid</span>
        <span class="nv">dev</span><span class="o">=</span><span class="k">${</span><span class="nv">BUSID</span><span class="p">[idx]</span><span class="k">}</span>
        <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">BRAND</span><span class="p">[idx]</span><span class="k">}</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"amd"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
            </span><span class="nv">dev</span><span class="o">=</span><span class="si">$(</span>get_amd_pir_busid <span class="k">${</span><span class="nv">BUSID</span><span class="p">[idx]</span><span class="k">}</span><span class="si">)</span>
        <span class="k">fi
        </span><span class="nb">printf</span> <span class="s2">"</span><span class="k">${</span><span class="nv">BUSID</span><span class="p">[idx]</span><span class="k">}</span><span class="s2"> </span><span class="si">$(</span>get_pir_device_slot <span class="nv">$dev</span><span class="si">)</span><span class="se">\n</span><span class="s2">"</span>
    <span class="k">done
else
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="se">\$</span><span class="s2">PIR Table not found. Exitting..."</span>
<span class="k">fi
</span><span class="nb">exit </span>0
</pre></table></code></div></div><h2 id="extending-the-script"><span class="mr-2">Extending the script</span><a href="#extending-the-script" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Even though this script works for this system, its actually most likely not work with another. What we have done previously only works on systems with that same mapping/motherboard. If we wanted to add support for another motherboard, we would have to map it by adding GPU devices one by one and recording the attached slot numbers. Then its just a matter of adding that map to the above script. This is easier said than done, given there can be quirks when reading the $PIR table like this.</p><p>It should be noted that the $PIR table contains data provided by the OEM/BIOS manufacturer. This makes it very dependent on the OEM to give accurate information. Information provided by the OEM may be incomplete, inaccurate, or wrong. This is why the data provided by the script can’t be 100% trusted. The goal of this script is to at least give a starting point when debugging rigs.</p><h2 id="conclusion"><span class="mr-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>I mainly focused on HiveOS, but it should be possible to adapt to other Linux-based OSes (or even Windows) and other hardware. Obviously the main drawback with this approach is all the work necessary to ensure compatibility across systems, but what is front-facing to the user is a easy to understand table of how the GPU devices are mapped in the system for servicing!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/writing/'>writing</a>, <a href='/categories/linux/'>linux</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/pcie/" class="post-tag no-text-decoration" >pcie</a> <a href="/tags/hiveos/" class="post-tag no-text-decoration" >hiveos</a> <a href="/tags/mining/" class="post-tag no-text-decoration" >mining</a> <a href="/tags/crypto/" class="post-tag no-text-decoration" >crypto</a> <a href="/tags/tutorial/" class="post-tag no-text-decoration" >tutorial</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Using+the+%24PIR+Table+to+get+PCIe+device+order+-+MattWert.io&url=https%3A%2F%2Fmatthewwertman.github.io%2Fposts%2Fusing-PIR-table-for-PCIe-device-order%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Using+the+%24PIR+Table+to+get+PCIe+device+order+-+MattWert.io&u=https%3A%2F%2Fmatthewwertman.github.io%2Fposts%2Fusing-PIR-table-for-PCIe-device-order%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmatthewwertman.github.io%2Fposts%2Fusing-PIR-table-for-PCIe-device-order%2F&text=Using+the+%24PIR+Table+to+get+PCIe+device+order+-+MattWert.io" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/little-martian/">All About Little Martian!</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/pcie/">pcie</a> <a class="post-tag" href="/tags/crypto/">crypto</a> <a class="post-tag" href="/tags/hello-world/">hello-world</a> <a class="post-tag" href="/tags/hiveos/">hiveos</a> <a class="post-tag" href="/tags/kvm/">kvm</a> <a class="post-tag" href="/tags/libvirt/">libvirt</a> <a class="post-tag" href="/tags/little-martian/">little-martian</a> <a class="post-tag" href="/tags/mining/">mining</a> <a class="post-tag" href="/tags/momentum-mod/">momentum-mod</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/win-10-11-kvm-with-gpu-passthrough/"><div class="card-body"> <em class="small" data-ts="1751353440" data-df="ll" > Jul 1, 2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Create a Win10/11 KVM virtual machine with GPU passthrough</h3><div class="text-muted small"><p> Introduction In this post, I will be giving detailed instructions on how to setup a Windows 10/11 KVM-based VM (Virtual Machine) with GPU passthrough. This guide includes how to setup your GPU wit...</p></div></div></a></div><div class="card"> <a href="/posts/little-martian/"><div class="card-body"> <em class="small" data-ts="1658685180" data-df="ll" > Jul 24, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>All About Little Martian!</h3><div class="text-muted small"><p> Brief introduction on how I found one of my favorite games to both play and develop! Origin Story Little Martian is a open world survival craft game (as of now, just a demo) created by Charlie, Ja...</p></div></div></a></div><div class="card"> <a href="/posts/getting-started-momentum-mod/"><div class="card-body"> <em class="small" data-ts="1674151440" data-df="ll" > Jan 19, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Momentum Mod - Getting Started</h3><div class="text-muted small"><p> Momentum Mod is the hottest mod on the street right now, if you are into custom Source Engine game modes. This guide will go over the following: What is Momentum Mod? How do I install it? Ho...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/getting-started-momentum-mod/" class="btn btn-outline-primary" prompt="Older"><p>Momentum Mod - Getting Started</p></a> <a href="/posts/win-10-11-kvm-with-gpu-passthrough/" class="btn btn-outline-primary" prompt="Newer"><p>Create a Win10/11 KVM virtual machine with GPU passthrough</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/MatthewWertman">Matthew Wertman</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/pcie/">pcie</a> <a class="post-tag" href="/tags/crypto/">crypto</a> <a class="post-tag" href="/tags/hello-world/">hello-world</a> <a class="post-tag" href="/tags/hiveos/">hiveos</a> <a class="post-tag" href="/tags/kvm/">kvm</a> <a class="post-tag" href="/tags/libvirt/">libvirt</a> <a class="post-tag" href="/tags/little-martian/">little-martian</a> <a class="post-tag" href="/tags/mining/">mining</a> <a class="post-tag" href="/tags/momentum-mod/">momentum-mod</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
